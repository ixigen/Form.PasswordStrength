if(!this.Form){this.Form={}}Form.PasswordStrength=new Class({Implements:[Options,Events],options:{threshold:66,primer:"",height:5,opacity:1,bgcolor:"transparent"},element:null,fx:null,initialize:function(b,a){this.element=document.id(b);this.setOptions(a);if(this.options.primer){this.options.threshold=this.options.primer.strength()}var e=this.element.getCoordinates();var c=new Element("div",{styles:{position:"absolute",top:e.top+e.height,left:e.left,width:e.width,height:this.options.height,opacity:this.options.opacity,"background-color":this.options.bgcolor}}).inject(document.body,"bottom");var d=new Element("div",{styles:{width:0,height:"100%"}}).inject(c);this.fx=new Fx.Morph(d,{duration:"short",link:"cancel",unit:"%"});this.element.addEvent("keyupandchange",this.animate.bind(this));if(this.element.get("value")){this.animate()}},animate:function(){var c=this.element.get("value");var a,d=c.strength(),b=(d/this.options.threshold).round(2).limit(0,1);if(b<0.5){a=("rgb(255, "+(255*b*2).round()+", 0)").rgbToHex()}else{a=("rgb("+(255*(1-b)*2).round()+", 255, 0)").rgbToHex()}this.fx.start({width:100*b,"background-color":a});this.fireEvent("update",[this.element,d,this.options.threshold])}});Element.Events.keyupandchange={base:"keyup",condition:function(b){var a=this.retrieve("prev",null);var c=this.get("value");if(typeOf(a)!="null"&&a==c){return false}this.store("prev",c);return true}};String.implement({strength:function(){var a=0;if(this.match(/\d/)){a+=10}if(this.match(/[a-z]+/)){a+=26}if(this.match(/[A-Z]+/)){a+=26}if(this.match(/[^\da-zA-Z]/)){a+=33}return(a==0)?0:(this.length*a.log()/(2).log()).round()}});